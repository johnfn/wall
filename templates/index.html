{% extends "skeleton.html" %}
  
{% block title %}Home{% endblock %}

{% block content %}
  {% include "postchallenge.html" %}

  <div id="sidebar">
    <div class="leaderboard">
      <h3>Leaderboard</h3>
      <ol>
        {% for candidate in candidates %}
          <li> <a href = "/candidates/{{ candidate.username }}">{{ candidate.username }}</a>: {{ candidate.get_profile.challenges_answered }}/{{ candidate.get_profile.challenges }} </li>
        {% endfor %}
      </ol>
    </div>
    <div id="support">
      <h3>Support a candidate!</h3>

      <div> 
        {% for candidate in candidates %}
          {% if candidate != user_info.supports %}
            <a href="/support/{{ candidate }}"> {{ candidate }} </a>
          {% else %}
            {{ candidate }}
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>


  {% for post in posts %}
    {# Show every top level post #}

    {% include "post.html" with post=post %}

    <div class="rightalittle">
      {% for comment in post.comment_set.all %}
        {% include "post.html" with post=comment %}
      {% endfor %}

      {% if not post.challenge_answered %}
        {% include "postcomment.html" with address="comment"  showchallenge="false" id=post.id %}
      {% endif %}
    </div>

  {% endfor %}

  <h3>Make a new comment: </h3>
  {% include "postcomment.html" with address="newpost" showchallenge="true" %}

  <div> 
    ‹‹ newer
    {% for number in page_range %}
      {% if number != current_page %}
        <a href="/{{ number }}/">{{ number }}</a>
      {% else %}
        {{ number }}
      {% endif %}
    {% endfor %} 
    older ››
  </div>

{% endblock %}